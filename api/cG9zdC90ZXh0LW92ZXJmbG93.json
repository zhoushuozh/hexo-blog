{"title":"CSS多行文本溢出省略显示","date":"2017-10-13T12:52:21.000Z","link":"post/text-overflow","comments":true,"tags":["CSS"],"categories":["前端"],"updated":"2019-02-15T03:25:12.373Z","content":"<p>文本溢出我们经常用到的应该就是<code>text-overflow:ellipsis</code>了，相信大家也很熟悉，但是对于多行文本的溢出处理确接触的不是很多，最近在公司群里面有同事问到，并且自己也遇到过这个问题，所以专门研究过这个问题。</p>\n<a id=\"more\"></a>\n<p>首先我们回顾一下以前实现单行缩略是可以通过下面的代码实现的：</p>\n<figure class=\"highlight css\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">overflow</span>: <span class=\"selector-tag\">hidden</span>;</span><br><span class=\"line\"><span class=\"selector-tag\">text-overflow</span>: <span class=\"selector-tag\">ellipsis</span>;</span><br><span class=\"line\"><span class=\"selector-tag\">white-space</span>: <span class=\"selector-tag\">nowrap</span>;</span><br></pre></td></tr></table></div></figure>\n<h2 id=\"WebKit内核浏览器解决办法\">WebKit内核浏览器解决办法<a href=\"post/text-overflow#WebKit内核浏览器解决办法\"></a></h2><p>首先，WebKit内核的浏览器实现起来比较简单，可以通过添加一个-webkit-line-clamp的私有属性来实现，-webkit-line-clamp是用来限制在一个块元素显示的文本的行数。 为了实现这个效果，它需要组合其他的WebKit属性：</p>\n<ul>\n<li>display: -webkit-box 将对象作为弹性伸缩盒子模型显示；</li>\n<li>-webkit-box-orient 设置或检索伸缩盒对象的子元素的排列方式；</li>\n<li>text-overflow: ellipsis 用省略号“…”隐藏超出范围的文本。</li>\n</ul>\n<p>具体代码参考如下：</p>\n<figure class=\"highlight css\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">overflow</span> : <span class=\"selector-tag\">hidden</span>;</span><br><span class=\"line\"><span class=\"selector-tag\">text-overflow</span>: <span class=\"selector-tag\">ellipsis</span>;</span><br><span class=\"line\"><span class=\"selector-tag\">display</span>: <span class=\"selector-tag\">-webkit-box</span>;</span><br><span class=\"line\"><span class=\"selector-tag\">-webkit-line-clamp</span>: 2;</span><br><span class=\"line\"><span class=\"selector-tag\">-webkit-box-orient</span>: <span class=\"selector-tag\">vertical</span>;</span><br></pre></td></tr></table></div></figure>\n<p>这个方法合适WebKit浏览器或移动端（绝大部分是WebKit内核的）浏览器，效果可以查看：</p>\n<iframe width=\"100%\" height=\"300\" src=\"https://jsfiddle.net/25uk3s9a/embedded/result,css,html/\" allowfullscreen=\"allowfullscreen\" frameborder=\"0\"></iframe>\n\n<h3 id=\"其他浏览器的解决方案\">其他浏览器的解决方案<a href=\"post/text-overflow#其他浏览器的解决方案\"></a></h3><p>目前没有什么CSS的属性可以直接控制多行文本的省略显示，比较靠谱的办法应该就是利用相对定位在最后面加上一个省略号了，代码可以参考下面：</p>\n<figure class=\"highlight css\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">p</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">position</span>:relative;</span><br><span class=\"line\">    <span class=\"attribute\">line-height</span>:<span class=\"number\">1.5em</span>;</span><br><span class=\"line\">    <span class=\"comment\">/* 高度为需要显示的行数*行高，比如这里我们显示两行，则为3 */</span></span><br><span class=\"line\">    <span class=\"attribute\">height</span>:<span class=\"number\">3em</span>;</span><br><span class=\"line\">    <span class=\"attribute\">overflow</span>:hidden;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-tag\">p</span><span class=\"selector-pseudo\">:after</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">content</span>:<span class=\"string\">\"...\"</span>;</span><br><span class=\"line\">    <span class=\"attribute\">position</span>:absolute;</span><br><span class=\"line\">    <span class=\"attribute\">bottom</span>:<span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"attribute\">right</span>:<span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"attribute\">padding</span>: <span class=\"number\">0</span> <span class=\"number\">5px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">background-color</span>: <span class=\"number\">#fff</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n<p>效果如下：</p>\n<iframe width=\"100%\" height=\"300\" src=\"https://jsfiddle.net/vcg74s8t/embedded/result,css,html/\" allowfullscreen=\"allowfullscreen\" frameborder=\"0\"></iframe>\n\n<p>不过这样会有一点问题：</p>\n<ol>\n<li>需要知道显示的行数并设置行高才行；</li>\n<li>IE6/7不支持after和content，需要添加一个标签来代替；</li>\n<li>省略号的背景颜色跟文本背景颜色一样，并且可能会遮住部分文字，建议可以使用渐变的png背景图片代替。</li>\n</ol>\n","prev":{"title":"JS函数节流(throttle)与函数去抖(debounce)","link":"post/js-throttle-debounce"},"plink":"https://blog.zhoushuo.me/post/text-overflow/","toc":[{"title":"WebKit内核浏览器解决办法","id":"WebKit内核浏览器解决办法","index":"1","children":[{"title":"其他浏览器的解决方案","id":"其他浏览器的解决方案","index":"1.1"}]}],"copyright":{"author":"zhoushuo","link":"<a href=\"https://blog.zhoushuo.me/post/text-overflow/\" title=\"CSS多行文本溢出省略显示\">https://blog.zhoushuo.me/post/text-overflow/</a>","license":"Attribution-NonCommercial-NoDerivatives 4.0 International (<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\" rel=\"external nofollow\" target=\"_blank\">CC BY-NC-ND 4.0</a>)"}}